<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
    <Target Name="BeforeBuild">
        <RemoveDir Directories="$(OutputPath)" />
        <MakeDir Directories="$(OutputPath)" />
    </Target>
    <Target Name="Plugins" DependsOnTargets="BeforeBuild">
        <MSBuild
            Projects="../source/Plugins/Playnite.SteamLibrary/Playnite.SteamLibrary.csproj"
            Targets="Build"
            Properties="OutputPath=bin/$(Configuration); Configuration=$(Configuration); AllowedReferenceRelatedFileExtensions=none;" />
    </Target>
    <Target Name="Build" DependsOnTargets="Plugins">
        <MSBuild
            Projects="../source/PlayniteUI/PlayniteUI.csproj"
            Targets="Build"
            Properties="OutputPath=$(OutputPath); Configuration=$(Configuration); AllowedReferenceRelatedFileExtensions=none;" />
    </Target>
</Project>